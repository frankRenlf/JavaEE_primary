<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/blog_login.css">

</head>

<body>
    <div class="nav">

        <img src="../images/male.png" alt="male">
        <span class="title">My blog</span>
        <span class="spacer"></span>

        <!-- <a href="./blog_list.html">Home page</a>
        <a href="./blog_edit.html">edit blog</a>
        <a href="#">Log out</a> -->
    </div>

    <div class="login-container">
        <!-- 中间的登陆框 -->
        <div class="login-dialog">
            <h3>登陆</h3>
            <div class="row">
                <span>ID</span>
                <input type="text" class="userid">
            </div>
            <div class="row">
                <span>用户名</span>
                <input type="text" class="username">
            </div>
            <div class="row">
                <span>密码</span>
                <input type="password" class="password">
            </div>
            <div class="row">
                <button class="submit">提交</button>
            </div>
        </div>

    </div>
</body>
<script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
<script>
    let id = document.querySelector('.userid');
    let un = document.querySelector('.username');
    let pw = document.querySelector('.password');
    let btn = document.querySelector('.submit');
    function staticMsg() {
        console.log(un.value + ': ' + pw.value);
        if (un.value == 'frank' && pw.value == 'rlf') {
            window.location.href = './blog_list.html';
        } else {
            if (un.value != 'frank') {
                alert('wrong username')
            } else if (pw.value != 'rlf') {
                alert('Wrong password');
            } else {
                alert('invalid input');
            }
        }
    }
    function loginMethod() {
        var uid = id.value;
        var uname = un.value;
        var upassword = pw.value;
        console.log(uname);
        let httpRequest = new XMLHttpRequest();
        // 2. 默认异步处理响应. 需要挂在处理响应的回调函数.
        httpRequest.onreadystatechange = function () {
            // readState 表示当前的状态.
            // 0: 请求未初始化
            // 1: 服务器连接已建立
            // 2: 请求已接收
            // 3: 请求处理中
            // 4: 请求已完成，且响应已就绪
            if (httpRequest.readyState == 4) {
                // status 属性获取 HTTP 响应状态码
                console.log(httpRequest.status);
                // responseText 属性获取 HTTP 响应 body
                console.log(httpRequest.responseText);
            }
        }
        // 3. 调用 open 方法设置要访问的 url
        httpRequest.open('GET', 'http://localhost/user');
        httpRequest.setRequestHeader('Content-Type', 'application/json');
        // 5. 调用 send 方法发送 http 请求
        httpRequest.send(JSON.stringify({
            id: uid,
            username: uname,
            password: upassword
        }));
    }
    btn.onclick = loginMethod;
    // document.onkeydown = jump();

    // btn.addEventListener("keyup", function (event) {
    //     event.preventDefault()
    //     if (event.keyCode === 13) {
    //         jump();
    //     }
    // })

</script>

</html>